{
  "name": "Comfy Dungeon",
  "version": "v0.2.1-uib",
  "emoji": "ðŸ§Œ",
  "description": "Build D&D Character Portraits",
  "theme": {
    "radius": "10px",
    "scheme": "orange tan"
  },
  "tags": ["D&D"],
  "formConfig": [
    {
      "group": "Character",
      "id": "gender",
      "type": "range",
      "label": "Gender",
      "info": "Femininity / Masculinity slider trait is tentative, the result may not be what you expect.",
      "defaultValueIndex": 0,
      "options": [
        {
          "label": "Femininity",
          "value": {
            "gender": 0,
            "isFemale": true,
            "genderPositive": "female",
            "genderNegative": "horror"
          }
        },
        {
          "value": {
            "gender": 1,
            "isFemale": true,
            "genderPositive": "(masculine:1.1) female",
            "genderNegative": "beard"
          }
        },
        {
          "value": {
            "gender": 2,
            "isFemale": false,
            "genderPositive": "(queer:0.9) feminine male",
            "genderNegative": "zombie, beard"
          }
        },
        {
          "label": "Masculinity",
          "value": {
            "gender": 3,
            "isFemale": false,
            "genderPositive": "male",
            "genderNegative": ""
          }
        }
      ]
    },
    {
      "group": "Character",
      "id": "age",
      "type": "range",
      "label": "Age",
      "defaultValueIndex": 1,
      "options": [
        { "label": "Young", "value": "young" },
        { "value": "30yo" },
        { "value": "45yo" },
        { "label": "Old", "value": "60yo" }
      ]
    },
    {
      "group": "Character",
      "id": "bodyStructure",
      "type": "range",
      "label": "Body structure",
      "defaultValueIndex": 1,
      "options": [
        {
          "label": "Slender",
          "value": { "bodyStructure": "slender", "isMuscular": false }
        },
        { "value": { "bodyStructure": "", "isMuscular": false } },
        { "value": { "bodyStructure": "strong", "isMuscular": true } },
        {
          "label": "Chubby",
          "value": { "bodyStructure": "chubby", "isMuscular": false }
        }
      ]
    },
    {
      "group": "Character",
      "id": "race",
      "type": "select",
      "label": "Race",
      "defaultValueIndex": 5,
      "options": [
        {
          "label": "Dwarf",
          "value": {
            "race": "dwarf",
            "isStocky": true,
            "racePositive": "dwarf",
            "raceNegative": ""
          }
        },
        {
          "label": "Elf",
          "value": {
            "race": "elf",
            "isStocky": false,
            "racePositive": "elven",
            "raceNegative": "green, beard, Christmas"
          }
        },
        {
          "label": "Gnome",
          "value": {
            "race": "gnome",
            "isStocky": true,
            "racePositive": "gnome",
            "raceNegative": "garden"
          }
        },
        {
          "label": "Half-Elf",
          "value": {
            "race": "half-elf",
            "isStocky": false,
            "racePositive": "half-elf, pointy ears.",
            "raceNegative": ""
          }
        },
        {
          "label": "Halfling",
          "value": {
            "race": "halfling",
            "isStocky": true,
            "racePositive": "halfling, pointy ears.",
            "raceNegative": ""
          }
        },
        {
          "label": "Human",
          "value": {
            "race": "human",
            "isStocky": false,
            "racePositive": "human",
            "raceNegative": "(elf, long pointy ears:1.2), Christmas, garden"
          }
        },
        {
          "label": "Tiefling",
          "value": {
            "race": "tiefling",
            "isStocky": false,
            "racePositive": "tiefling",
            "raceNegative": ""
          }
        }
      ]
    },
    {
      "group": "Character",
      "id": "ethnicBias",
      "type": "select",
      "label": "Ethnic bias",
      "info": "Adds a random ethnicity to the character based on the area selected. It's a light conditioning that helps making the generations more interesting; it doesn't guarantee an exact nationality.",
      "defaultValueIndex": 0,
      "options": [
        { "label": "-- undefined --", "value": "" },
        {
          "label": "Africa: Eastern",
          "value": "Eritrean,Djiboutian,Ethiopian,Somali,Kenyan,Ugandan,Rwandan,Burundian,Tanzanian,Malagasy,Mauritian,Seychellois"
        },
        {
          "label": "Africa: Middle",
          "value": "Chadian,Sudanese,Central African,Cameroonian,Gabonese,Equatorial Guinean,Sao Tomean,Angolan,Congolese,Zambian,Malawian,Mozambican,Madagascan,Comorian,Mauritian,Seychellois"
        },
        {
          "label": "Africa: Northen",
          "value": "Egyptian,Libyan,Tunisian,Algerian,Moroccan,Mauritanian,Sahrawi,Tuareg"
        },
        {
          "label": "Africa: Southern",
          "value": "Namibian,South African,Botswanan,Zimbabwean,Zambian,Malawian,Mozambican,Swazi,Lesotho,Basotho"
        },
        {
          "label": "Africa: Western",
          "value": "Mauritanian,Senegalese,Malian,Nigerien,Burkinabe,Ivorian,Ghanaian,Togolese,Beninese,Nigerian,Cameroonian,Equatorial Guinean,Sao Tomean,Gabonese,Congolese"
        },
        {
          "label": "America: Central",
          "value": "Belizean,Costa Rican,Salvadoran,Guatemalan,Honduran,Nicaraguan,Panamanian"
        },
        {
          "label": "America: Northern",
          "value": "Antiguan,Bahamian,Barbadian,Cuban,Dominican,Dominican,Grenadian,Haitian,Jamaican,Kittian and Nevisian,Lucian,Vincentian,Trinidadian and Tobagonian"
        },
        {
          "label": "America: Sourthern",
          "value": "Argentine,Bolivian,Brazilian,Chilean,Colombian,Ecuadorian,Guyanese,Paraguayan,Peruvian,Surinamese,Uruguayan,Venezuelan"
        },
        {
          "label": "Asia: Central",
          "value": "Kazakhstani,Kyrgyzstani,Tajikistani,Turkmen,Uzbekistani"
        },
        {
          "label": "Asia: Eastern",
          "value": "Chinese,Japanese,Korean,Mongolian,Taiwanese"
        },
        {
          "label": "Asia: South-Eastern",
          "value": "Bangladeshi,Bhutanese,Indian,Maldivian,Nepalese,Pakistani,Sri Lankan"
        },
        {
          "label": "Asia: Southern",
          "value": "Burmese,Cambodian,Filipino,Indonesian,Laotian,Malaysian,Singaporean,Thai,Timorese,Vietnamese"
        },
        {
          "label": "Asia: Western",
          "value": "Afghan,Armenian,Azerbaijani,Bahraini,Cypriot,Georgian,Iranian,Iraqi,Israeli,Jordanian,Kuwaiti,Lebanese,Omani,Palestinian,Qatari,Saudi,Syrian,Turkish,Emirati,Yemeni"
        },
        {
          "label": "Australia & New Zealand",
          "value": "Australian,Fijian,I-Kiribati,Marshallese,Micronesian,Nauruan,New Zealander,Palauan,Papua New Guinean,Samoan,Solomon Islander,Tongan,Tuvaluan,Vanuatuan"
        },
        {
          "label": "European: Eastern",
          "value": "Belarusian,Bulgarian,Czech,Hungarian,Polish,Moldovan,Romanian,Russian,Slovak,Ukrainian"
        },
        {
          "label": "European: Northern",
          "value": "Estonian,Latvian,Lithuanian"
        },
        {
          "label": "European: Southern",
          "value": "Albanian,Bosnian,Croatian,Greek,Italian,Maltese,Montenegrin,North Macedonian,Portuguese,Serbian,Slovenian,Spanish"
        },
        {
          "label": "European: Western",
          "value": "Austrian,Belgian,Dutch,French,German,Liechtensteiner,Luxembourger,Monacan,Swiss"
        },
        {
          "label": "European: Islandic",
          "value": "Icelandic,Irish,Manx,British"
        },
        {
          "label": "Mela/Micro/Poly-nesia",
          "value": "Fijian,Papua New Guinean,Solomon Islander,Vanuatuan,Kiribati,Marshallese,Micronesian,Nauruan,Palauan,Samoan,Tongan,Tuvaluan"
        }
      ],
      "usePrngSubset": 2,
      "weight": 0.7
    },
    {
      "group": "Character",
      "id": "characterClass",
      "type": "select",
      "label": "Class",
      "defaultValueIndex": 1,
      "options": [
        { "label": "Cleric", "value": "cleric" },
        { "label": "Fighter", "value": "fighter" },
        { "label": "Mage", "value": "mage" },
        { "label": "Noble person", "value": "noble person" },
        { "label": "Paladin", "value": "paladin" },
        { "label": "Peasant", "value": "peasant" },
        { "label": "Ranger", "value": "ranger" },
        { "label": "Shaman", "value": "shaman" },
        { "label": "Thief", "value": "thief" }
      ]
    },
    {
      "group": "Character",
      "id": "clothing",
      "type": "select",
      "label": "Clothing / Armor",
      "defaultValueIndex": 0,
      "options": [
        { "label": "-- undefined --", "value": "" },
        { "label": "Casual clothing", "value": "wearing casual clothing" },
        { "label": "Elegant clothing", "value": "wearing elegant garments" },
        { "label": "Furs", "value": "wearing furs clothing" },
        { "label": "Light armor", "value": "wearing a leather armor" },
        { "label": "Minimal", "value": "wearing minimal simple clothing" },
        { "label": "Heavy armor", "value": "wearing a heavy armor" },
        { "label": "Noble clothing", "value": "wearing noble clothing" },
        { "label": "Rags", "value": "wearing rags" },
        { "label": "Robe", "value": "wearing a robe" }
      ]
    },
    {
      "group": "Character",
      "id": "hairstyle",
      "type": "select",
      "label": "Hairstyle",
      "info": "Please note that some hairstyles work better (or at all) with a specific gender and / or ethnicity.",
      "defaultValueIndex": 0,
      "options": [
        {
          "label": "-- undefined --",
          "value": {
            "hairstyle": "",
            "hairLength": "",
            "canColorHair": false
          }
        },
        {
          "label": "Bald",
          "value": {
            "hairstyle": "bald",
            "hairLength": "",
            "canColorHair": false
          }
        },
        {
          "label": "Braids",
          "value": {
            "hairstyle": "simple braid hairstyle",
            "hairLength": "",
            "canColorHair": false
          }
        },
        {
          "label": "Buzz cut",
          "value": {
            "hairstyle": "buzz haircut",
            "hairLength": "",
            "canColorHair": false
          }
        },
        {
          "label": "Cornrows",
          "value": {
            "hairstyle": "cornrows hairstyle",
            "hairLength": "",
            "canColorHair": false
          }
        },
        {
          "label": "Curly Long",
          "value": {
            "hairstyle": "curly hair",
            "hairLength": "long",
            "canColorHair": true
          }
        },
        {
          "label": "Curly Short",
          "value": {
            "hairstyle": "curly hair",
            "hairLength": "short",
            "canColorHair": true
          }
        },
        {
          "label": "Dreadlocks",
          "value": {
            "hairstyle": "dreadlocks hairstyle",
            "hairLength": "",
            "canColorHair": false
          }
        },
        {
          "label": "Long hair",
          "value": {
            "hairstyle": "hair",
            "hairLength": "long",
            "canColorHair": true
          }
        },
        {
          "label": "Long disheveled",
          "value": {
            "hairstyle": "disheveled hair",
            "hairLength": "long",
            "canColorHair": true
          }
        },
        {
          "label": "Long straight",
          "value": {
            "hairstyle": "straight hair",
            "hairLength": "long",
            "canColorHair": true
          }
        },
        {
          "label": "Mohawk",
          "value": {
            "hairstyle": "mohawk hairstyle",
            "hairLength": "short",
            "canColorHair": false
          }
        },
        {
          "label": "Pixie cut",
          "value": {
            "hairstyle": "pixie haircut",
            "hairLength": "",
            "canColorHair": false
          }
        },
        {
          "label": "Ponytail",
          "value": {
            "hairstyle": "ponytail hairstyle",
            "hairLength": "",
            "canColorHair": false
          }
        },
        {
          "label": "Short hair",
          "value": {
            "hairstyle": "hair",
            "hairLength": "short",
            "canColorHair": true
          }
        },
        {
          "label": "Short disheveled",
          "value": {
            "hairstyle": "disheveled hair",
            "hairLength": "short",
            "canColorHair": true
          }
        },
        {
          "label": "Short straight",
          "value": {
            "hairstyle": "straight hair",
            "hairLength": "short",
            "canColorHair": true
          }
        }
      ]
    },
    {
      "group": "Character",
      "id": "hairColor",
      "type": "select",
      "label": "Hair color",
      "defaultValueIndex": 0,
      "options": [
        { "label": "-- undefined --", "value": "" },
        { "label": "Blond", "value": "blond" },
        { "label": "Dark Blond", "value": "dark blond" },
        { "label": "Medium Brown", "value": "medium brown" },
        { "label": "Dark Brown", "value": "dark brown" },
        { "label": "Reddish Brown", "value": "reddish brown" },
        { "label": "Red", "value": "red" },
        { "label": "Black", "value": "black" },
        { "label": "Graying", "value": "canescent" },
        { "label": "Gray", "value": "gray" },
        { "label": "White", "value": "white" }
      ]
    },
    {
      "group": "Scene",
      "id": "style",
      "type": "select",
      "label": "Style",
      "defaultValueIndex": 0,
      "options": [
        {
          "label": "Fantasy",
          "value": {
            "style": "fantasy",
            "stylePost": "(D&D:1.1), (Lord of the rings:0.8)"
          }
        }
      ]
    },
    {
      "group": "Scene",
      "id": "background",
      "type": "select",
      "label": "Background",
      "defaultValueIndex": 0,
      "options": [
        {
          "label": "-- undefined --",
          "value": { "background": "", "backgroundNegative": "" }
        },
        {
          "label": "Cave",
          "value": {
            "background": "inside a cave",
            "backgroundNegative": "flat background"
          }
        },
        {
          "label": "Desert",
          "value": {
            "background": "in the desert",
            "backgroundNegative": "flat background"
          }
        },
        {
          "label": "Dungeon",
          "value": {
            "background": "inside a dungeon",
            "backgroundNegative": "flat background"
          }
        },
        {
          "label": "Flames",
          "value": {
            "background": "flames in background",
            "backgroundNegative": "flat background"
          }
        },
        {
          "label": "Forest",
          "value": {
            "background": "forest in background",
            "backgroundNegative": "flat background"
          }
        },
        {
          "label": "Glacier",
          "value": {
            "background": "on a glacier",
            "backgroundNegative": "flat background"
          }
        },
        {
          "label": "Magical aura",
          "value": {
            "background": "magical aura in background",
            "backgroundNegative": "flat background"
          }
        },
        {
          "label": "Mountains",
          "value": {
            "background": "mountains in background",
            "backgroundNegative": "flat background"
          }
        },
        {
          "label": "Plain background",
          "value": {
            "background": "flat plain background",
            "backgroundNegative": "flat background"
          }
        },
        {
          "label": "Study",
          "value": {
            "background": "in the study, scrolls and potions",
            "backgroundNegative": "flat background"
          }
        },
        {
          "label": "Temple",
          "value": {
            "background": "inside a temple",
            "backgroundNegative": "flat background"
          }
        },
        {
          "label": "Town",
          "value": {
            "background": "on the streets of an old town",
            "backgroundNegative": "flat background"
          }
        }
      ]
    },
    {
      "group": "Scene",
      "id": "mood",
      "type": "select",
      "label": "Mood",
      "defaultValueIndex": 2,
      "options": [
        { "label": "Angry", "value": "angry evil" },
        { "label": "Somber", "value": "wise thoughtful serious mood" },
        { "label": "Neutral", "value": "" },
        { "label": "Cunning", "value": "cunning smirk mood" },
        { "label": "Serene", "value": "serene joyful dreamy" },
        { "label": "Happy", "value": "happy jovial (smiling:0.85)" }
      ]
    },
    {
      "group": "Scene",
      "id": "colorHint",
      "type": "select",
      "label": "Color hint",
      "info": "The picture will have a predominant color.",
      "defaultValueIndex": 0,
      "options": [
        { "label": "-- undefined --", "value": "" },
        { "label": "Burgundy", "value": "burgundy" },
        { "label": "Scarlet", "value": "scarlet red" },
        { "label": "Pink", "value": "pink" },
        { "label": "Beige", "value": "beige" },
        { "label": "Brown", "value": "brown" },
        { "label": "Orange", "value": "orange" },
        { "label": "Yellow", "value": "yellow" },
        { "label": "Green", "value": "green" },
        { "label": "Emerald", "value": "emerald" },
        { "label": "Aquamarine", "value": "aquamarine" },
        { "label": "Cerulean", "value": "cerulean" },
        { "label": "Blue", "value": "blue" },
        { "label": "Purple", "value": "purple" },
        { "label": "Magenta", "value": "magenta" },
        { "label": "White", "value": "white" },
        { "label": "Gray", "value": "gray" },
        { "label": "Black", "value": "black" },
        { "label": "Bronze", "value": "bronze" },
        { "label": "Copper", "value": "copper" },
        { "label": "Silver", "value": "silver" },
        { "label": "Gold", "value": "gold" }
      ]
    },
    {
      "group": "Custom",
      "id": "customPrompt",
      "type": "textarea",
      "label": "Custom Prompt",
      "info": "Keep it simple. Don't be too discoursive, write the element that you'd want to add. Eg: \"red scarf\" or \"silver tiara\". You might need to add strength with the syntax \"(silver tiara:1.2)\".\n\nIf the element is generic and could be misinterpreted try to give context. Eg: instead of \"crown\" try with \"wearing a silver crown on his head\".",
      "colSpan": 2,
      "defaultValue": ""
    },
    {
      "group": "Generation Params",
      "id": "ckptOverride",
      "type": "selectckpt",
      "label": "Checkpoint override",
      "info": "Override the model from \"Preset\" (experimental)",
      "colSpan": 2,
      "defaultValue": ""
    },
    {
      "group": "Generation Params",
      "id": "quality",
      "type": "range",
      "label": "Quality",
      "defaultValueIndex": 3,
      "options": [
        { "label": "Speed", "value": 0.25 },
        { "value": 0.5 },
        { "value": 0.75 },
        { "label": "Accuracy", "value": 1 }
      ]
    },
    {
      "group": "Generation Params",
      "id": "batchSize",
      "label": "Results per generation",
      "type": "range",
      "defaultValueIndex": 0,
      "options": [
        { "label": "1", "value": 1 },
        { "label": "2", "value": 2 },
        { "label": "3", "value": 3 },
        { "label": "4", "value": 4 },
        { "label": "5", "value": 5 },
        { "label": "6", "value": 6 },
        { "label": "7", "value": 7 },
        { "label": "8", "value": 8 },
        { "label": "9", "value": 9 }
      ]
    },
    {
      "group": "Generation Params",
      "id": "preset",
      "type": "select",
      "label": "Preset",
      "defaultValueIndex": 1,
      "options": [
        {
          "label": "Illustration - Fast",
          "value": {
            "preset": "illustration-fast",
            "model": "ProteusV0.3",
            "stylePositive": "illustration digital painting",
            "styleNegative": "photo, anime",
            "baseSteps": 4,
            "stepMultiplier": 4,
            "cfg": 2.5,
            "samplerName": "lcm",
            "scheduler": "normal",
            "isLcm": true
          }
        },
        {
          "label": "Illustration - Accurate",
          "value": {
            "preset": "illustration-accurate",
            "model": "ProteusV0.3",
            "stylePositive": "illustration digital painting",
            "styleNegative": "photo, anime",
            "baseSteps": 14,
            "stepMultiplier": 14,
            "cfg": 6.5,
            "samplerName": "dpmpp_2m",
            "scheduler": "exponential",
            "isLcm": false
          }
        },
        {
          "label": "Anime - Fast",
          "value": {
            "preset": "anime-fast",
            "model": "ProteusV0.3",
            "stylePositive": "anime illustration",
            "styleNegative": "photo, fanart",
            "baseSteps": 4,
            "stepMultiplier": 4,
            "cfg": 2.5,
            "samplerName": "lcm",
            "scheduler": "normal",
            "isLcm": true
          }
        },
        {
          "label": "Anime - Accurate",
          "value": {
            "preset": "anime-accurate",
            "model": "ProteusV0.3",
            "stylePositive": "anime illustration",
            "styleNegative": "photo, fanart",
            "baseSteps": 14,
            "stepMultiplier": 14,
            "cfg": 6.5,
            "samplerName": "dpmpp_2m",
            "scheduler": "exponential",
            "isLcm": false
          }
        },
        {
          "label": "Cinematic",
          "value": {
            "preset": "cinematic",
            "model": "DreamShaperXL",
            "stylePositive": "film still cinematic photo",
            "styleNegative": "illustration, anime, cosplay",
            "baseSteps": 6,
            "stepMultiplier": 4,
            "cfg": 2,
            "samplerName": "dpmpp_sde",
            "scheduler": "karras",
            "isLcm": false
          }
        }
      ]
    },
    {
      "group": "Generation Params",
      "id": "seed",
      "label": "Seed",
      "type": "seed",
      "defaultValue": { "seed": 9482966021, "random": false },
      "min": 0
    }
  ],
  "adapterConfig": [
    {
      "destination": "CheckpointLoaderSimple > ckpt_name",
      "actions": [
        "get:model",
        "findInCkptNames",
        ["if:ckptOverride", "clear", "get:ckptOverride"]
      ]
    },
    {
      "destination": "Positive Prompt > text",
      "actions": [
        "get:style",
        "get:stylePositive",
        "raw:closeup of a",
        "get:age",
        ["if:isStocky", "raw:stocky"],
        "get:bodyStructure",
        ["if:isFemale", "if:isMuscular", "raw:muscular"],
        "get:ethnicBias",
        "get:racePositive",
        "get:genderPositive",
        "get:characterClass",
        ["if:hairstyle", "raw:with"],
        "get:hairLength",
        ["if:canColorHair", "get:hairColor"],
        "get:hairstyle",
        "get:clothing",
        "get:background",
        "raw:.",
        "raw:High quality, detailed, high resolution",
        "get:stylePost",
        "raw:.",
        "get:mood",
        "get:colorHint",
        "raw:.",
        "get:customPrompt"
      ]
    },
    {
      "destination": "Negative Prompt > text",
      "actions": [
        "get:styleNegative",
        "get:raceNegative",
        "raw:rendering, blurry, noisy, deformed, text",
        "get:genderNegative",
        "raw:scars, blood, dirty, nipples, naked, boobs, cleavage, face mask, zippers, ill, lazy eye",
        "get:backgroundNegative",
        "raw:author, signature, 3d."
      ]
    },
    {
      "destination": "EmptyLatentImage > batch_size",
      "actions": "get:batchSize"
    },
    {
      "destination": "KSampler > seed",
      "actions": "get:seed"
    },
    {
      "destination": "KSampler > steps",
      "actions": [
        "get:quality",
        "multiply:stepMultiplier",
        "round",
        "add:baseSteps"
      ]
    },
    {
      "destination": "KSampler > cfg",
      "actions": "get:cfg"
    },
    {
      "destination": "KSampler > sampler_name",
      "actions": "get:samplerName"
    },
    {
      "destination": "KSampler > scheduler",
      "actions": "get:scheduler"
    },
    {
      "destination": "LoraLoader > mode",
      "actions": ["num:4", ["if:isLcm", "num:0"]]
    },
    {
      "destination": "LoraLoader > lora_name",
      "actions": ["raw:lcm-lora-sdxl", "findInLoraNames"]
    },
    {
      "destination": "ModelSamplingDiscrete > mode",
      "actions": ["num:4", ["if:isLcm", "num:0"]]
    },
    {
      "destination": "RescaleCFG > mode",
      "actions": ["num:4", ["if:enableRescaleCfg", "num:0"]]
    }
  ]
}
